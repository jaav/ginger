 %{user_cur = models.VadGingerUser.find("id is " + session.get("userId")).first();
  	userRole = user_cur.role;
  	%}
 <div class="row">
 
 #{if userRole.compareTo(models.RoleType.ADMIN)>=0}
 
 
 
  <div class="label">Centrum</div>
  <div class="field">
  	    <select name="entity.centrumId.id" id="organizationSelect">

      <option value="">(None)</option>
             
        %{ models.Centrums.all().fetch().sort{ it.toString() }.each() { }%
          
          %{
            selected = false;
            if (entity?.centrumId?.id == it.id) {
              selected = true
            }
          }%
          <option value="${it?.id}" ${selected ? 'selected'.raw() : ''}>${it.naam}</option>
        %{ } }%
        </select>
  </div>
  <span class="error">${errors.forKey('entity.naam')}</span>
  #{/if}
  #{else}
  
    <div class="label"></div>
  <div class="field">
      <input type="hidden" name="entity.centrumId.id" value="${entity?.centrumId?.id}"/>
  </div>
  <span class="error">${errors.forKey('entity.id')}</span>
  #{/else}
  
</div>
 
 <div class="row">
  <div class="label">Naam</div>
  <div class="field">
      <input type="text" name="entity.naam" value="${entity?.naam}"/>
  </div>
  <span class="error">${errors.forKey('entity.naam')}</span>
</div>
 <div class="row">
  <div class="label">Beschrijving</div>
  <div class="field">
      <textarea name="entity.beschrijving" rows="10" cols="40">${entity?.beschrijving}</textarea>
  </div>
  <span class="error">${errors.forKey('entity.beschrijving')}</span>
</div>

 <div class="row">
  <div class="label">Regions</div>
  %{
  	i = 0;
  	k = 10;
  	ut = new utils.ClusterUtils();
  	keys = new ArrayList<String>(ut.postCodeList.keySet());
  	if (locs!=null) {
  		i = locs.size();
  		k = k - i;
  		
  		
  	}
  	z = 0
  }%
 #{list items:locs, as:'loc'}
  <div class="field">
 
 %{z++;}%
 <li>PS${z}:  <select name="cluster${z}" id="clusterSelect">
 <option value="">(None)</option>
 #{list items:keys, as:'key'}
 %{
 	selected = false;
 	loc_name = ut.postCodeList.get(key);
 	
 	if (loc_name.length()>50&&loc.naam.length()>50) {
 		selected = loc_name.substring(0,50).equals(loc.naam.substring(0,50));
 	} else
 	   selected = loc_name.equals(loc.naam)
 
 	
 }%
 <option value="${key}" ${selected ? 'selected'.raw() : ''}>${loc_name}</option>
 #{/list}
 </select>
 </li>
 </div>
 #{/list}
  %{ while (k > 0) { %}
   <div class="field">
 %{z++}%
 <li>PS${z}:  <select name="cluster${z}" id="clusterSelect">
 <option value="">(None)</option>
 #{list items:keys, as:'key'}
 <option value="${key}"}>${ut.postCodeList.get(key)}</option>
 #{/list}
 </select>
 </li>
 </div>
  %{
  k--;
  }}%
</div>



 <div class="row">
  <div class="label"></div>
  <div class="field">
      <input type="hidden" name="entity.id" value="${entity?.id}"/>
  </div>
  <span class="error">${errors.forKey('entity.id')}</span>
</div>